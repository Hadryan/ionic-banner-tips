angular.module("bing.ionic.content.banner",["ionic"]),function(e,n){"use strict";e.module("bing.ionic.content.banner").directive("ionContentBanner",["$interval",function(e){return{restrict:"E",scope:!0,link:function(n,t){var o;n.currentIndex=0,n.text.length>1&&(o=e(function(){n.currentIndex=n.currentIndex<n.text.length-1?n.currentIndex+1:0},n.interval)),n.$on("$destroy",function(){t.remove(),o&&e.cancel(o)})},template:'<div class="content-banner-text-wrapper"><div ng-repeat="item in text track by $index" ng-class="{active: $index === currentIndex}" class="content-banner-text" ng-bind-html="item"></div></div><button class="content-banner-close button button-icon icon {{::icon}}" ng-click="close()"></button>'}}])}(angular),function(e,n,t){"use strict";e.module("bing.ionic.content.banner").factory("$ionicContentBanner",["$document","$rootScope","$compile","$timeout","$ionicPlatform","$ionicScrollDelegate",function(t,o,a,i,c,l){function r(e){for(;null!==e&&"BODY"!==e.nodeName;){var n=e.getAttribute("nav-view");if(null!==n&&"cached"===n)return!1;e=e.parentNode}return!0}function s(e){var n=e.querySelectorAll('ion-nav-view[nav-view="active"]');return 1===n.length?n[0]:Array.prototype.slice.call(n).filter(function(e){return r(e)})[0]}function u(r){var u=o.$new(!0);e.extend(u,{icon:"ion-ios-close-empty",transition:"vertical",interval:7e3,type:"info",$deregisterBackButton:e.noop,closeOnStateChange:!0,autoClose:3e3,delegateHandle:null},r);var d="content-banner "+u.type+" content-banner-transition-"+u.transition,b=u.element=a('<ion-content-banner class="'+d+'"></ion-content-banner>')(u),p=t[0].body,g=u.closeOnStateChange?o.$on("$stateChangeSuccess",function(){u.close()}):e.noop;return u.$deregisterBackButton=c.registerBackButtonAction(function(){i(u.close)},300),u.close=function(){u.removed||(u.removed=!0,n.requestAnimationFrame(function(){b.removeClass("content-banner-in"),i(function(){u.$destroy(),b.remove(),p=g=null},400)}),u.$deregisterBackButton(),g())},u.show=function(){u.removed||(u.delegateHandle?l.$getByHandle(u.delegateHandle).getScrollView().__container.appendChild(b[0]):s(p).querySelector(".scroll-content").appendChild(b[0]),n.requestAnimationFrame(function(){i(function(){b.addClass("content-banner-in"),u.autoClose&&i(function(){u.close()},u.autoClose,!1)},20,!1)}))},i(function(){u.show()},50,!1),u.close.$scope=u,u.close}function d(n){var c=o.$new(!0);switch(e.extend(c,{icon:"ion-close-circled",iconBell:"ion-android-volume-up",text:null,type:"info",left:200,height:30,closeOnStateChange:!0,delegateHandle:null},n),c.type){case"info":c.themeClass="bar-balanced",c.iconSpan="icon-close-balanced";break;case"warning":c.themeClass="bar-energized",c.iconSpan="icon-close-energized";break;case"error":c.themeClass="bar-assertive",c.iconSpan="icon-close-assertive";break;case"positive":c.themeClass="bar-positive",c.iconSpan="icon-close-positive";break;case"calm":c.themeClass="bar-calm",c.iconSpan="icon-close-calm";break;case"royal":c.themeClass="bar-royal",c.iconSpan="icon-close-royal";break;case"dark":c.themeClass="bar-dark",c.iconSpan="icon-close-dark"}var r='<div class="bar bar-subheader {{::themeClass}}" style="height:{{::height}}px"><sapn class="icon-bell-stable-banner {{::iconSpan}}"><i class="{{::iconBell}}"></i></sapn><span class="title-stable-banner"><span class="title-stable-banner-content" ng-bind-html="text"></span></span><span class="icon-close-stable-banner {{::iconClose}}" ng-click="close()"><i class="{{::icon}}"></i></span></div>',u=c.element=a(r)(c),d=t[0].body;return c.getActiveContent=function(){return c.delegateHandle?e.element(l.$getByHandle(c.delegateHandle).getScrollView().__container).parent()[0].querySelector("ion-content"):s(d).querySelector("ion-view").querySelector("ion-content")},c.close=function(){i(function(){c.$destroy(),u.remove();var e=c.getActiveContent();e.style.top="44px",d=e=u=null},200)},c.show=function(){c.delegateHandle?e.element(l.$getByHandle(c.delegateHandle).getScrollView().__container).parent()[0].appendChild(u[0]):s(d).querySelector("ion-view").appendChild(u[0]);var n=c.getActiveContent(),t=t=u[0].querySelector(".title-stable-banner-content"),o=e.element(n)[0].clientWidth,a=e.element(t)[0].clientWidth+c.left;n.style.top=44+c.height+"px",a<o?(t.style.animationPlayState="paused",t.style.WebkitAnimationPlayState="paused"):t.style.left=c.left+"px",n=t=o=a=null},i(function(){c.show()},50,!1),c.close.$scope=c,c.close}return{show:u,showstablebanner:d}}])}(angular,ionic);