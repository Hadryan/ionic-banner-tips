angular.module("bing.ionic.content.banner",["ionic"]),function(e,n){"use strict";e.module("bing.ionic.content.banner").directive("ionContentBanner",["$interval",function(e){return{restrict:"E",scope:!0,link:function(n,t){var o;n.currentIndex=0,n.text.length>1&&(o=e(function(){n.currentIndex=n.currentIndex<n.text.length-1?n.currentIndex+1:0},n.interval)),n.$on("$destroy",function(){t.remove(),o&&e.cancel(o)})},template:'<div class="content-banner-text-wrapper"><div ng-repeat="item in text track by $index" ng-class="{active: $index === currentIndex}" class="content-banner-text" ng-bind-html="item"></div></div><button class="content-banner-close button button-icon icon {{::icon}}" ng-click="close()"></button>'}}])}(angular),function(e,n,t){"use strict";e.module("bing.ionic.content.banner").factory("$ionicContentBanner",["$document","$rootScope","$compile","$timeout","$ionicPlatform","$ionicScrollDelegate",function(t,o,a,c,i,l){function r(e){for(;null!==e&&"BODY"!==e.nodeName;){var n=e.getAttribute("nav-view");if(null!==n&&"cached"===n)return!1;e=e.parentNode}return!0}function s(e){var n=e.querySelectorAll('ion-nav-view[nav-view="active"]');return 1===n.length?n[0]:Array.prototype.slice.call(n).filter(function(e){return r(e)})[0]}function u(r){var u=o.$new(!0);e.extend(u,{icon:"ion-ios-close-empty",transition:"vertical",interval:7e3,type:"info",$deregisterBackButton:e.noop,closeOnStateChange:!0,autoClose:null,delegateHandle:null},r);var d="content-banner "+u.type+" content-banner-transition-"+u.transition,b=u.element=a('<ion-content-banner class="'+d+'"></ion-content-banner>')(u),g=t[0].body,p=u.closeOnStateChange?o.$on("$stateChangeSuccess",function(){u.close()}):e.noop;return u.$deregisterBackButton=i.registerBackButtonAction(function(){c(u.close)},300),u.close=function(){u.removed||(u.removed=!0,n.requestAnimationFrame(function(){b.removeClass("content-banner-in"),c(function(){u.$destroy(),b.remove(),g=p=null},400)}),u.$deregisterBackButton(),p())},u.show=function(){u.removed||(u.delegateHandle?l.$getByHandle(u.delegateHandle).getScrollView().__container.appendChild(b[0]):s(g).querySelector(".scroll-content").appendChild(b[0]),n.requestAnimationFrame(function(){c(function(){b.addClass("content-banner-in"),u.autoClose&&c(function(){u.close()},u.autoClose,!1)},20,!1)}))},c(function(){u.show()},50,!1),u.close.$scope=u,u.close}function d(n){var i=o.$new(!0);switch(e.extend(i,{icon:"ion-close-circled",text:null,type:"info",left:200,height:30,$deregisterBackButton:e.noop,closeOnStateChange:!0,delegateHandle:null},n),i.type){case"info":i.themeClass="bar-balanced",i.iconClose="icon-close-balanced";break;case"warning":i.themeClass="bar-energized",i.iconClose="icon-close-energized";break;case"error":i.themeClass="bar-assertive",i.iconClose="icon-close-assertive";break;case"positive":i.themeClass="bar-positive",i.iconClose="icon-close-positive";break;case"calm":i.themeClass="bar-calm",i.iconClose="icon-close-calm";break;case"royal":i.themeClass="bar-royal",i.iconClose="icon-close-royal";break;case"dark":i.themeClass="bar-dark",i.iconClose="icon-close-dark"}var r='<div class="bar bar-subheader {{::themeClass}}" style="height:{{::height}}px"><span class="title-stable-banner"><span class="title-stable-banner-content" ng-bind-html="text"></span></span><span class="icon-close-stable-banner {{::iconClose}}" ng-click="close()"><i class="{{::icon}}"></i></span></div>',u=i.element=a(r)(i),d=t[0].body;return i.getActiveContent=function(){return i.delegateHandle?e.element(l.$getByHandle(i.delegateHandle).getScrollView().__container).parent()[0].querySelector("ion-content"):s(d).querySelector("ion-view").querySelector("ion-content")},i.close=function(){c(function(){i.$destroy(),u.remove();var e=i.getActiveContent();e.style.top="44px",d=e=u=null},200)},i.show=function(){i.delegateHandle?e.element(l.$getByHandle(i.delegateHandle).getScrollView().__container).parent()[0].appendChild(u[0]):s(d).querySelector("ion-view").appendChild(u[0]);var n=i.getActiveContent(),t=t=u[0].querySelector(".title-stable-banner-content"),o=e.element(n)[0].clientWidth,a=e.element(t)[0].clientWidth+i.left;n.style.top=44+i.height+"px",a<o?(t.style.animationPlayState="paused",t.style.WebkitAnimationPlayState="paused"):t.style.left=i.left+"px",n=t=o=a=null},c(function(){i.show()},50,!1),i.close.$scope=i,i.close}return{show:u,showstablebanner:d}}])}(angular,ionic);